
Import('*')

if env['CONF']['USE_RISCV_ISA']:
    env.TagImplies('riscv isa', 'gem5 lib')

Source('CustomReg.cc', tags='riscv isa')

Source('decoder.cc', tags='riscv isa')
Source('faults.cc', tags='riscv isa')
Source('interrupts.cc', tags='riscv isa')
Source('isa.cc', tags='riscv isa')
Source('process.cc', tags='riscv isa')
Source('pagetable.cc', tags='riscv isa')
Source('pagetable_walker.cc', tags='riscv isa')
Source('pma_checker.cc', tags='riscv isa')
Source('pmp.cc', tags='riscv isa')
Source('reg_abi.cc', tags='riscv isa')
Source('remote_gdb.cc', tags='riscv isa')
Source('semihosting.cc', tags='riscv isa')
Source('tlb.cc', tags='riscv isa')

Source('linux/se_workload.cc', tags='riscv isa')
Source('linux/fs_workload.cc', tags='riscv isa')

Source('bare_metal/fs_workload.cc', tags='riscv isa')

# SimObject('CustomReg.py', sim_objects=['CustomRegisterBank'],
#     tags='riscv isa')#new add


SimObject('PMAChecker.py', sim_objects=['PMAChecker', 'BasePMAChecker'],
    tags='riscv isa')
SimObject('PMP.py', sim_objects=['PMP'], tags='riscv isa')
SimObject('RiscvDecoder.py', sim_objects=['RiscvDecoder'], tags='riscv isa')
SimObject('RiscvFsWorkload.py',
    sim_objects=['RiscvBareMetal', 'RiscvLinux',
                 'RiscvBootloaderKernelWorkload'],
    tags='riscv isa')
SimObject('RiscvInterrupts.py', sim_objects=['RiscvInterrupts'],
    tags='riscv isa')
SimObject('RiscvISA.py', sim_objects=['RiscvISA'],
    enums=['RiscvType', 'PrivilegeModeSet'], tags='riscv isa')
SimObject('RiscvMMU.py', sim_objects=['RiscvMMU'], tags='riscv isa')
SimObject('RiscvSemihosting.py', sim_objects=['RiscvSemihosting'],
          tags='riscv isa')
SimObject('RiscvSeWorkload.py', sim_objects=[
    'RiscvSEWorkload', 'RiscvEmuLinux'], tags='riscv isa')
SimObject('RiscvTLB.py', sim_objects=['RiscvPagetableWalker', 'RiscvTLB'],
    tags='riscv isa')

SimObject('RiscvCPU.py', sim_objects=[], tags='riscv isa')

DebugFlag('RiscvMisc', tags='riscv isa')
DebugFlag('PMP', tags='riscv isa')

# Add in files generated by the ISA description.
ISADesc('isa/main.isa', tags='riscv isa')
